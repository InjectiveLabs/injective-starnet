# State Sync Tool

A Go-based tool for syncing `.injectived/` state across multiple remote servers using `rsync` and `ssh`.  
The script reads a JSON file (storage.json generated by starnet) containing a list of servers and performs the following steps **in parallel**:

1. **Stop `injectived`** on each remote machine.
2. **Sync** the local state directory (`.injectived/`) to all remote servers.
3. **Restart `injectived`** after the sync is complete.

---

## üì¶ Installation

Ensure `rsync` is installed on your system:

```sh
which rsync
```


If its missing 
Ubuntu/Debian: `sudo apt install rsync`

Mac: `brew install rsync`


## üîß Configuration

Check constants in cmd/copy/main.go in case you need to modify local/remove folders you want to sync (maybe you want only .injectived/data for copying only state), otherwise use defaults.

Tool requires local `.injectived/` that you want to sync on all machines.


| Parameter      | Description                                     | Default Value |
|---------------|-------------------------------------------------|--------------|
| `localFolder` | Local folder to sync                           | `.injectived/` |
| `remoteUser`  | SSH username for remote access                 | `injectived` |
| `remoteFolder`| Destination path on remote servers             | `/home/injectived/.injectived` |





The tool  will:

‚Ä¢	Read storage.json

‚Ä¢	Stop injectived

‚Ä¢	Sync state with all servers

‚Ä¢	Restart injectived once done

## üèó Usage

`go run cmd/copy/main.go`

Follow up the progress and outputs.